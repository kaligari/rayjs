<!DOCTYPE html>
<html lang="en">
<head>
<script type="module">
import { render, width, height, engine, imageBuffer } from './build/debug.js'

const canvas = document.getElementById('canvas')
canvas.width = width
canvas.height = height
const ctx = canvas.getContext('2d')
const imageData = ctx.createImageData(width, height)
const renderFrame = () => {
    window.requestAnimationFrame(renderFrame)
    render()
    new Uint32Array(imageData.data.buffer).set(new Uint32Array(imageBuffer.value.buffer))
    ctx.putImageData(imageData, 0, 0);
    // ctx.fillStyle = "red";
    // ctx.fillText(`${engine.fps} fps`, 10, 20)
}

window.addEventListener('resize', () => renderFrame())

renderFrame()
</script>
</head>
<body>
    <canvas id="canvas"></canvas>
</body>
</html>
